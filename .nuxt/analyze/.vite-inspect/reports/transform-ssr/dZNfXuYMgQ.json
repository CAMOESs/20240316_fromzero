{
  "resolvedId": "/mnt/1c4c2374-6f70-425b-ab4c-d1db6332863a/carlos/project/2024/CQM/pages/tableau-de-bord/configuration/signataires.vue?vue&type=style&index=0&lang.scss?inline&used",
  "transforms": [
    {
      "name": "vite:vue",
      "result": "\n.custom-switch .v-label {\n  text-align: left;\n  order: -1;\n  /* Mettez le label avant le contrôle du switch */\n  margin-right: 15px;\n  /* Ajoutez une marge entre le label et le switch */\n}\n",
      "start": 1709717497465,
      "end": 1709717497465,
      "sourcemaps": {
        "version": 3,
        "sources": [
          "/mnt/1c4c2374-6f70-425b-ab4c-d1db6332863a/carlos/project/2024/CQM/pages/tableau-de-bord/configuration/signataires.vue"
        ],
        "names": [],
        "mappings": ";AAuPA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACtB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EAChB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;EACT,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;EAChD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EAClB,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;AACpD",
        "file": "/mnt/1c4c2374-6f70-425b-ab4c-d1db6332863a/carlos/project/2024/CQM/pages/tableau-de-bord/configuration/signataires.vue",
        "sourceRoot": "",
        "sourcesContent": [
          "<template>\n  <br>\n  <br>  \n  <v-form @submit.prevent>\n    <v-text-field label=\"Nombre de signataire \" v-model.trim=\"item.nbr_sign\" type=\"number\" min=\"1\" max=\"3\"\n      variant=\"outlined\" class=\"mx-2 \" />\n\n    <div class=\"mx-2 mb-14\">\n      <v-btn variant=\"flat\" type=\"submit\" block color=\"light-blue-darken-4 \"\n        :disabled=\"item.nbr_sign > 3 || item.nbr_sign == 0 || !item.nbr_sign\" @click=\"handler\">Valider</v-btn>\n    </div>\n  </v-form>\n  <v-switch  class=\"my-10 ml-2 custom-switch\" color=\"#00e676\" v-model=\"hideInputImg\" v-show=\"errors\"\n            density=\"compact\" label=\"Mise a jour sans import d'image\" label-placement=\"right\"></v-switch>\n  <v-form @submit.prevent v-if=\"show\">\n    <v-card style=\"transform: translateY(-40px);\" class=\"ma-2\" v-for=\"(item, index) in convert_nbr_sign\" :key=\"index\">\n      <v-toolbar class=\"text-center \" :title=\"`Signataire N° ${index + 1}`\"></v-toolbar>\n\n      <v-card-text>\n        <div>\n\n          <v-text-field label=\"Titre *\" v-model.trim=\"items['signataire_' + index].title_of_sign\" type=\"text\"\n            variant=\"outlined\" />\n          <v-file-input v-model=\"items['signataire_' + index].sign\" accept=\"image/png, image/jpeg, image/bmp\"\n            prepend-inner-icon=\"mdi-camera\" prepend-icon=\"\" label=\"Signature image à télécharger *\"\n            :id=\"'signataire_' + index\" ref=\"imageFile\" @change=\"handleImageUpload\" v-show=\"!hideInputImg\"\n             ></v-file-input>\n          <div v-if=\"nbr > 0\">\n            <v-btn @click=\"showImgs(items['signataire_' + index])\" variant=\"plain\" v-if=\"items['signataire_' + index].signature_url\">\n              cliquez ici pour voir l'image enregistrée\n            </v-btn>\n            <v-img :src=\"`/api/showphoto?t=signataire_${index}.${items['signataire_' + index].exe}`\" \n              v-if=\"items['signataire_' + index].showimg\"\n            style=\"\n                            width: 300px;\n                            height: 300px;\n                            margin-left: auto;\n                            margin-right: auto;\n                          \">\n            </v-img>\n          </div>\n\n          <v-switch v-model=\"items['signataire_' + index].showed\" class=\"mt-0 ml-2 custom-switch\" color=\"#00e676\"\n            density=\"compact\" label=\"Afficher la signature\" label-placement=\"right\"></v-switch>\n          <!-- <v-text-field label=\"afficher la signature \" v-model.trim=\"items['signataire_' + index].name\"\n                          type=\"text\" variant=\"outlined\" /> -->\n        </div>\n\n      </v-card-text>\n\n\n    </v-card>\n    <v-card-actions>\n      <v-row>\n\n        <v-col cols=\"12\" sm=\"12\">\n          <v-btn variant=\"flat\" type=\"submit\" block color=\"light-blue-darken-4 \" :disabled=\"disable(items,!hideInputImg)\"\n            @click=\"posted\">Enregistrer</v-btn>\n\n        </v-col>\n      </v-row>\n    </v-card-actions>\n  </v-form>\n</template>\n  \n<script setup>\nconst { $caxios } = useNuxtApp();\n\nlet item = ref({\n\n})\nlet items = ref({})\n\nlet document = ref(null);\nlet formData = ref({});\nlet reload_img = ref(1);\nasync function handleImageUpload(event) {\n  document = event.target.files[0];\n  items.value[`${event.target.id}`].sign = event.target.files[0]\n\n}\n\nlet msg = ref('')\nlet inputRules = {\n  required: value => {\n    // msg = 'Champ obligatoire.'\n    msg.value = 'Champ obligatoire.'\n    const isValueTruthy = !!value;\n\n    if (!isValueTruthy) {\n      return msg.value\n    }\n\n  },\n  tails: v => v.length == 3 || \"taille = 3\",\n  email: (v) => {\n    indic = 1\n    if ((/^[a-z.-]+@[a-z.-]+\\.[a-z]+$/i.test(v))) return true\n    message.value = 'Doit être un e-mail valide.'\n    return message.value\n  }\n}\n\nlet item_final = ref({})\nlet convert_nbr_sign = ref(0)\nconst datajson = ref([])\ndatajson.value = await $caxios('/signataire/')\nlet nbr = datajson.value ? datajson.value.length : 0\nlet show = ref(false)\nlet voirImg = ref(false)\nlet hideInputImg = ref(false)\nlet errors = ref()\n errors.value = nbr>0 ? true: false\n\nlet posted = async (event) => {\n  voirImg.value = false\n  let tableauDeValeurs = Object.keys(items.value);\n  formData = new FormData();\n  if (nbr > 0) {\n    datajson.value.forEach(e => {\n      formData.append(`signature_url_${e.signataire - 1}`, e.signature_url);\n    })\n  }\n  if (nbr != item.value.nbr_sign) {\n    nbr = item.value.nbr_sign\n  }\n  tableauDeValeurs.forEach((e) => {\n    formData.append(`title_of_sign_${e}`, items.value[e].title_of_sign);\n    formData.append(`showed_${e}`, items.value[e].showed);\n    formData.append(`nbr`, nbr);\n    if (items.value[e].sign) {\n      formData.append(`items.value[${e}].sign`, items.value[e].sign);\n    } else {\n      items.value[e].sign = ''\n    }\n    item_final.value[e] = items.value[e]\n    formData.append(`${e}`, 'ttr')\n  })\n  let data = await useFetch('/api/signataire/', {\n    method: \"POST\",\n    body: formData\n  })\n  datajson.value = await $caxios('/signataire/')\n  nbr =  datajson.value.length\n  errors.value = true\n  entershow()\n}\n\nfunction showImgs(items) {\n  items.showimg=!items.showimg\n}\n\nlet entershow = ()=>{\n  if (nbr > 0) {\n  item.value.nbr_sign = nbr\n  convert_nbr_sign.value = nbr\n  show.value = true\n  items.value = {}\n  for (let i = 0; i < convert_nbr_sign.value; i++) {\n    items.value['signataire_' + i] = {\n      title_of_sign: (nbr != 0 && datajson.value[i]) ? datajson.value[i].title_of_sign : '',\n      showed: (nbr != 0 && datajson.value[i]) ? datajson.value[i].showed == 'true' : false,\n      signature_url: (nbr != 0 && datajson.value[i]) ? datajson.value[i].signature_url : '',\n      exe: (nbr != 0 && datajson.value[i]) ? datajson.value[i].exe : '',\n      showimg: false,\n\n    }\n\n  }\n}\n} \n\nentershow()\n\nlet handler = async () => {\n  show.value = true\n  msg.value = ''\n \n  //  si un nouvel champ d'enregistrement est pris alors eviter d'afficher le bouton d'uplead sans image\n  if(nbr > 0){\n    datajson.value = await $caxios('/signataire/')\n    if(nbr < item.value.nbr_sign){\n      errors.value = false\n    } else {\n      errors.value = true\n\n    } \n  } else {\n    datajson.value = [] \n    errors.value = false\n  } \n\n  items.value = {}\n  convert_nbr_sign.value = parseInt(item.value.nbr_sign) || 0\n\n  for (let i = 0; i < convert_nbr_sign.value; i++) {\n    items.value['signataire_' + i] = {\n      title_of_sign: (nbr != 0 && datajson.value[i]) ? datajson.value[i].title_of_sign : '',\n      showed: (nbr != 0 && datajson.value[i]) ? datajson.value[i].showed == 'true' : false,\n      signature_url: (nbr != 0 && datajson.value[i]) ? datajson.value[i].signature_url : '',\n      exe: (nbr != 0 && datajson.value[i]) ? datajson.value[i].exe : '',\n      showImg: false,\n    }\n\n  }\n\n}\n\nlet disable = (item,isDisabled) => {\n  let valeur = Object.values(item);\n  let aff = ref(false)\n  if (isDisabled) {\n    for (let j = 0; j < valeur.length; j++) {\n    if (!valeur[j].title_of_sign || !valeur[j].sign) {\n      aff.value = true;  // Si la condition est réalisée pour au moins un élément, aff.value devient true\n      break;  // Briser la boucle si la condition est réalisée\n    }\n  }\n\n  return aff.value;\n  } else {\n    for (let j = 0; j < valeur.length; j++) {\n    if (!valeur[j].title_of_sign ) {\n      aff.value = true;  // Si la condition est réalisée pour au moins un élément, aff.value devient true\n      break;  // Briser la boucle si la condition est réalisée\n    }\n  }\n\n  return aff.value;\n  } \n  \n};\n\nasync function downloadPdf(id_) {\n\n  let filename = \"signataire_0.png\";\n  const a = window.document.createElement(\"a\");\n  // alert(a)\n  a.href = (`./server/public/images/signataire/signataire_${id_}.png`);\n  //  a.download = filename;\n  a.target = \"_blank\";\n  a.click();\n}\n\n</script>\n  \n<style lang=\"scss\">\n.custom-switch .v-label {\n  text-align: left;\n  order: -1;\n  /* Mettez le label avant le contrôle du switch */\n  margin-right: 15px;\n  /* Ajoutez une marge entre le label et le switch */\n}\n</style>\n  \n  \n  "
        ]
      }
    },
    {
      "name": "nuxt:layer-aliasing",
      "start": 1709717497465,
      "end": 1709717497465,
      "order": "pre"
    },
    {
      "name": "nuxt:layer-aliasing",
      "start": 1709717497465,
      "end": 1709717497465,
      "order": "pre"
    },
    {
      "name": "nuxt:server-devonly:transform",
      "start": 1709717497465,
      "end": 1709717497465,
      "order": "pre"
    },
    {
      "name": "nuxt:server-devonly:transform",
      "start": 1709717497465,
      "end": 1709717497465,
      "order": "pre"
    },
    {
      "name": "nuxt:client-fallback-auto-id",
      "start": 1709717497465,
      "end": 1709717497465,
      "order": "pre"
    },
    {
      "name": "vite:css",
      "result": ".custom-switch .v-label{margin-right:15px;order:-1;text-align:left}",
      "start": 1709717497465,
      "end": 1709717497589,
      "order": "normal",
      "sourcemaps": {
        "version": 3,
        "file": "/mnt/1c4c2374-6f70-425b-ab4c-d1db6332863a/carlos/project/2024/CQM/pages/tableau-de-bord/configuration/signataires.vue",
        "mappings": "AACA,wBAIE,kBAFA,SADA",
        "names": [],
        "sources": [
          "/mnt/1c4c2374-6f70-425b-ab4c-d1db6332863a/carlos/project/2024/CQM/pages/tableau-de-bord/configuration/signataires.vue"
        ],
        "sourcesContent": [
          null
        ]
      }
    },
    {
      "name": "vite:esbuild",
      "start": 1709717497594,
      "end": 1709717497594,
      "order": "normal"
    },
    {
      "name": "vite:json",
      "start": 1709717497594,
      "end": 1709717497594,
      "order": "normal"
    },
    {
      "name": "vite:worker",
      "start": 1709717497594,
      "end": 1709717497594,
      "order": "normal"
    },
    {
      "name": "vite:vue",
      "result": ".custom-switch .v-label{margin-right:15px;order:-1;text-align:left}",
      "start": 1709717497594,
      "end": 1709717497610,
      "order": "normal",
      "sourcemaps": {
        "file": "/mnt/1c4c2374-6f70-425b-ab4c-d1db6332863a/carlos/project/2024/CQM/pages/tableau-de-bord/configuration/signataires.vue",
        "mappings": "AAAA,wBAAwB,iBAAiB,CAAC,QAAQ,CAAC,eAAe",
        "names": [],
        "sources": [
          "/mnt/1c4c2374-6f70-425b-ab4c-d1db6332863a/carlos/project/2024/CQM/pages/tableau-de-bord/configuration/signataires.vue"
        ],
        "sourcesContent": [
          null
        ],
        "version": 3
      }
    },
    {
      "name": "vite:vue-jsx",
      "start": 1709717497614,
      "end": 1709717497614,
      "order": "normal"
    },
    {
      "name": "replace",
      "start": 1709717497615,
      "end": 1709717497615,
      "order": "normal"
    },
    {
      "name": "replace",
      "start": 1709717497615,
      "end": 1709717497615,
      "order": "normal"
    },
    {
      "name": "nuxt:remove-plugin-metadata",
      "start": 1709717497615,
      "end": 1709717497615,
      "order": "normal"
    },
    {
      "name": "nuxt:remove-plugin-metadata",
      "start": 1709717497615,
      "end": 1709717497615,
      "order": "normal"
    },
    {
      "name": "replace",
      "start": 1709717497615,
      "end": 1709717497615,
      "order": "normal"
    },
    {
      "name": "nuxt:components:imports",
      "start": 1709717497615,
      "end": 1709717497615,
      "order": "normal"
    },
    {
      "name": "replace",
      "start": 1709717497616,
      "end": 1709717497616,
      "order": "normal"
    },
    {
      "name": "ssr-styles",
      "start": 1709717497616,
      "end": 1709717497616,
      "order": "normal"
    },
    {
      "name": "vite:define",
      "start": 1709717497616,
      "end": 1709717497616,
      "order": "normal"
    },
    {
      "name": "vite:css-post",
      "result": "export default \".custom-switch .v-label{margin-right:15px;order:-1;text-align:left}\"",
      "start": 1709717497616,
      "end": 1709717497616,
      "order": "normal",
      "sourcemaps": {
        "mappings": ""
      }
    },
    {
      "name": "vite:build-html",
      "start": 1709717497616,
      "end": 1709717497616,
      "order": "normal"
    },
    {
      "name": "vite:worker-import-meta-url",
      "start": 1709717497617,
      "end": 1709717497617,
      "order": "normal"
    },
    {
      "name": "vite:asset-import-meta-url",
      "start": 1709717497617,
      "end": 1709717497617,
      "order": "normal"
    },
    {
      "name": "commonjs",
      "start": 1709717497617,
      "end": 1709717497617,
      "order": "normal"
    },
    {
      "name": "vite:dynamic-import-vars",
      "start": 1709717497617,
      "end": 1709717497617,
      "order": "normal"
    },
    {
      "name": "vite:import-glob",
      "start": 1709717497617,
      "end": 1709717497617,
      "order": "normal"
    },
    {
      "name": "nuxt:composable-keys",
      "start": 1709717497617,
      "end": 1709717497617,
      "order": "post"
    },
    {
      "name": "nuxt:composable-keys",
      "start": 1709717497617,
      "end": 1709717497617,
      "order": "post"
    },
    {
      "name": "nuxt:imports-transform",
      "start": 1709717497617,
      "end": 1709717497617,
      "order": "post"
    },
    {
      "name": "nuxt:imports-transform",
      "start": 1709717497617,
      "end": 1709717497617,
      "order": "post"
    },
    {
      "name": "unctx:transform",
      "start": 1709717497617,
      "end": 1709717497617,
      "order": "post"
    },
    {
      "name": "unctx:transform",
      "start": 1709717497617,
      "end": 1709717497617,
      "order": "post"
    },
    {
      "name": "nuxt:pages-macros-transform",
      "start": 1709717497617,
      "end": 1709717497617,
      "order": "post"
    },
    {
      "name": "nuxt:pages-macros-transform",
      "start": 1709717497617,
      "end": 1709717497617,
      "order": "post"
    },
    {
      "name": "nuxt:tree-shake-template",
      "start": 1709717497617,
      "end": 1709717497617,
      "order": "post"
    },
    {
      "name": "nuxt:components-loader",
      "start": 1709717497617,
      "end": 1709717497618,
      "order": "post"
    },
    {
      "name": "nuxt:tree-shake-composables:transform",
      "start": 1709717497618,
      "end": 1709717497618,
      "order": "post"
    },
    {
      "name": "vite:build-import-analysis",
      "start": 1709717497618,
      "end": 1709717497618,
      "order": "normal"
    },
    {
      "name": "vite:reporter",
      "start": 1709717497618,
      "end": 1709717497618,
      "order": "normal"
    }
  ]
}
