import{_ as ee}from"./breadcrumbs.e7037877.js";import{_ as le}from"./table.665c22b5.js";import{q as te,u as oe,r as n,p as D,b as d,d as S,f as o,h as t,e as i,w as s,j as f,i as P,o as j,l as v,t as R,g as ae}from"./entry.febd1464.js";const se={class:"mt-4"},ne=i("span",{class:"d-none d-xs-none d-sm-block"},"Ajouter",-1),ie=i("span",{class:"d-none d-xs-none d-sm-block"},"Modifier",-1),de=i("span",{class:"d-none d-xs-none d-sm-block"},"Supprimer",-1),ue={style:{"text-align":"center"}},re={style:{"text-align":"center"}},me={class:"text-center"},pe=i("div",null,null,-1),_e={key:0,class:"text-h5"},fe={key:1,class:"text-h5"},ve={class:"d-flex justify-end"},ce=i("div",null,null,-1),be=i("span",{class:"text-h5"},"Suppression ",-1),xe={class:"pb-5 px-3"},Ve={class:"d-flex justify-end"},Ue={__name:"utilisateurs",async setup(ye){let V,k;te({title:"Liste des utilisateurs"});let T=oe(),_=n([]),g=n([]),a=n({}),M=n([]),u=n(!1),r=n(!1),N=n(!1),h=n(!1),x=n(!1),q=n(1),w=n(1),H=n([{text:"Utilisateurs & profils",to:"/tableau-de-bord/utilisateurs-profils"},{text:"Utilisateurs"}]);const J=n([{key:"numero",text:"N°",active_modif_column:!0},{key:"lastname",text:"Nom",active_modif_column:!1},{key:"firstname",text:"Prénom(s)",active_modif_column:!1},{key:"phone_number",text:"Téléphone",active_modif_column:!1},{key:"email",text:"Email",active_modif_column:!1},{key:"role_user",text:"Profil",active_modif_column:!0},{key:"login_at",text:"Dernier accès",active_modif_column:!0},{key:"can_auth",text:"Statut",active_modif_column:!0}]);n("/api/users-pagination"),n("Liste des utilisateurs");const z=n(["M","F"]),m=n("Veuillez renseigner ce champ.");({data:M}=([V,k]=D(()=>P("/api/users/profils","$yi3b3ZX5iY")),V=await V,k(),V));async function G(y){var U,b;let l={};N.value=!0,_.value=[];try{if(l=await P("/api/users/",{params:{page:y}},"$JoGDrL1HJi"),(U=l.data.value)!=null&&U.error)throw"";g.value=l.data.value.data,q.value=l.data.value.length,w.value=y}catch(p){console.log(p),T.error((b=l.data.value)==null?void 0:b.error)}N.value=!1}async function C(){x.value&&(h.value=!0)}function X(){r.value=!0}function A(y){console.log("create"),console.log(y),y?(u.value=!0,a.value={Roles:[]}):Array.isArray(_.value)&&_.value[0]&&(a.value=_.value[0],u.value=!0)}return[V,k]=D(()=>G(1)),await V,k(),(y,l)=>{const U=ee,b=d("v-icon"),p=d("v-btn"),Y=le,Z=d("v-pagination"),E=d("v-container"),I=d("v-col"),K=d("v-row"),$=d("v-card-title"),c=d("v-text-field"),O=d("v-autocomplete"),Q=d("v-select"),W=d("v-form"),B=d("v-card-text"),F=d("v-card"),L=d("v-dialog");return j(),S("div",se,[o(U,{items:t(H)},null,8,["items"]),i("div",null,[o(p,{class:"mr-1",style:{color:"white"},color:"#093e73",onClick:l[0]||(l[0]=e=>A(!0))},{default:s(()=>[o(b,null,{default:s(()=>[v("mdi-plus")]),_:1}),ne]),_:1}),o(p,{class:"mr-1",style:{color:"white"},color:"#093e73",disabled:t(_).length!=1,onClick:l[1]||(l[1]=e=>A(!1))},{default:s(()=>[o(b,null,{default:s(()=>[v("mdi-pencil ")]),_:1}),ie]),_:1},8,["disabled"]),o(p,{class:"mr-1",style:{color:"white"},color:"#093e73",disabled:t(_).length==0,onClick:l[2]||(l[2]=e=>X())},{default:s(()=>[o(b,null,{default:s(()=>[v("mdi-delete ")]),_:1}),de]),_:1},8,["disabled"])]),o(Y,{with_selected:!0,selected:t(_),"onUpdate:selected":l[3]||(l[3]=e=>f(_)?_.value=e:_=e),items:t(g),"onUpdate:items":l[4]||(l[4]=e=>f(g)?g.value=e:g=e),header:t(J),expanded:!1,no_data:"Aucune donnée disponible!"},{"item(numero)":s(({index:e})=>[i("div",ue,R(e+1),1)]),"item(role_user)":s(({elt_item:e})=>[i("div",re,R(e.role_to_one_user),1)]),_:1},8,["selected","items","header"]),i("template",null,[i("div",me,[o(E,null,{default:s(()=>[o(K,{justify:"center"},{default:s(()=>[o(I,{cols:"8"},{default:s(()=>[o(E,{class:"max-width"},{default:s(()=>[o(Z,{modelValue:t(w),"onUpdate:modelValue":l[5]||(l[5]=e=>f(w)?w.value=e:w=e),class:"my-4",length:2},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})])]),i("div",null,[o(L,{modelValue:t(u),"onUpdate:modelValue":l[22]||(l[22]=e=>f(u)?u.value=e:u=e),persistent:""},{default:s(()=>[o(F,null,{default:s(()=>[pe,o($,{class:"d-flex justify-space-between"},{default:s(()=>[t(a).id?(j(),S("span",_e,"Modifier un utilisateur")):(j(),S("span",fe,"Enregistrer un utilisateur")),o(p,{onClick:l[6]||(l[6]=e=>f(u)?u.value=!1:u=!1),variant:"plain",icon:""},{default:s(()=>[o(b,null,{default:s(()=>[v("mdi-close")]),_:1})]),_:1})]),_:1}),o(B,null,{default:s(()=>[o(W,{modelValue:t(x),"onUpdate:modelValue":l[20]||(l[20]=e=>f(x)?x.value=e:x=e),onSubmit:l[21]||(l[21]=ae(e=>C(),["prevent"])),class:"mt-5"},{default:s(()=>[o(c,{modelValue:t(a).email,"onUpdate:modelValue":l[7]||(l[7]=e=>t(a).email=e),label:"Email *",rules:[e=>/.@./.test(e)||t(m)],placeholder:"email@gmail.com",type:"email",variant:"outlined"},null,8,["modelValue","rules"]),o(O,{modelValue:t(a).Roles,"onUpdate:modelValue":l[8]||(l[8]=e=>t(a).Roles=e),items:t(M),"item-title":"name","item-value":"slug",label:"Profils *","no-data-text":"Aucune donnée",multiple:"","closable-chips":"",chips:"",clearable:"","deletable-chips":"",variant:"outlined",rules:[e=>e.length>0||t(m)]},null,8,["modelValue","items","rules"]),o(c,{modelValue:t(a).lastname,"onUpdate:modelValue":l[9]||(l[9]=e=>t(a).lastname=e),label:"Nom *",rules:[e=>!!e||t(m)],type:"text",variant:"outlined"},null,8,["modelValue","rules"]),o(c,{modelValue:t(a).firstname,"onUpdate:modelValue":l[10]||(l[10]=e=>t(a).firstname=e),label:"Prénom(s) *",rules:[e=>!!e||t(m)],type:"text",variant:"outlined"},null,8,["modelValue","rules"]),o(Q,{modelValue:t(a).sex,"onUpdate:modelValue":l[11]||(l[11]=e=>t(a).sex=e),items:t(z),rules:[e=>!!e||t(m)],clearable:"","deletable-chips":"",variant:"outlined",label:"Sexe *"},null,8,["modelValue","items","rules"]),o(c,{modelValue:t(a).date_of_birth,"onUpdate:modelValue":l[12]||(l[12]=e=>t(a).date_of_birth=e),label:"Date de naissance *",rules:[e=>!!e||t(m)],type:"date",variant:"outlined"},null,8,["modelValue","rules"]),o(c,{modelValue:t(a).place_of_birth,"onUpdate:modelValue":l[13]||(l[13]=e=>t(a).place_of_birth=e),label:"Lieu de naissance *",rules:[e=>!!e||t(m)],type:"text",variant:"outlined"},null,8,["modelValue","rules"]),o(c,{modelValue:t(a).nationality,"onUpdate:modelValue":l[14]||(l[14]=e=>t(a).nationality=e),label:"Nationalité *",placeholder:"Bénin",rules:[e=>!!e||t(m)],type:"text",variant:"outlined"},null,8,["modelValue","rules"]),o(c,{modelValue:t(a).phone_number,"onUpdate:modelValue":l[15]||(l[15]=e=>t(a).phone_number=e),label:"Téléphone *",rules:[e=>!!e||t(m)],type:"text",variant:"outlined"},null,8,["modelValue","rules"]),o(c,{modelValue:t(a).password,"onUpdate:modelValue":l[16]||(l[16]=e=>t(a).password=e),label:t(a).id?"Mot de passe":"Mot de passe *",rules:t(a).id?[]:[e=>!!e||t(m)],type:"password",variant:"outlined"},null,8,["modelValue","label","rules"]),o(c,{modelValue:t(a).confirm_password,"onUpdate:modelValue":l[17]||(l[17]=e=>t(a).confirm_password=e),label:t(a).id?t(a).password?"Confirmation du mot de passe *":"Confirmation du mot de passe":"Confirmation du mot de passe *",rules:[e=>t(a).password===e||(t(a).confirm_password?"Le mot de passe ne correspond pas":t(m))],type:"password",variant:"outlined"},null,8,["modelValue","label","rules"]),i("div",ve,[o(p,{color:"secondary",text:"",onClick:l[18]||(l[18]=e=>f(u)?u.value=!1:u=!1),variant:"outlined",class:"mr-2"},{default:s(()=>[v(" Fermer ")]),_:1}),o(p,{disabled:t(x)==!1,color:"#093e73",type:"submit",class:"text-white",loading:t(h),onClick:l[19]||(l[19]=e=>C())},{default:s(()=>[v(" Enregistrer ")]),_:1},8,["disabled","loading"])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(L,{modelValue:t(r),"onUpdate:modelValue":l[26]||(l[26]=e=>f(r)?r.value=e:r=e),persistent:"","max-width":"500"},{default:s(()=>[o(F,null,{default:s(()=>[ce,o($,{class:"d-flex justify-space-between"},{default:s(()=>[be,o(p,{onClick:l[23]||(l[23]=e=>f(r)?r.value=!1:r=!1),variant:"plain",icon:""},{default:s(()=>[o(b,null,{default:s(()=>[v("mdi-close")]),_:1})]),_:1})]),_:1}),o(B,null,{default:s(()=>[v(" Etes vous sur de vouloir supprimer votre sélection ? ")]),_:1}),i("div",xe,[i("div",Ve,[o(p,{color:"#093e73",text:"",onClick:l[24]||(l[24]=e=>f(r)?r.value=!1:r=!1),variant:"outlined",class:"mr-2"},{default:s(()=>[v(" Fermer ")]),_:1}),o(p,{disabled:t(x)==!1,color:"red",type:"submit",class:"text-white",onClick:l[25]||(l[25]=e=>C())},{default:s(()=>[v(" Supprimer ")]),_:1},8,["disabled"])])])]),_:1})]),_:1},8,["modelValue"])])])}}};export{Ue as default};
