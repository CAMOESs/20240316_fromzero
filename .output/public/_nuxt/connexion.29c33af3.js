import{r as n,c as g,a as c,b as m,d as q,e as t,f as u,w as h,g as M,o as B,h as a,j as x,u as N,n as y}from"./entry.febd1464.js";const P={id:"app"},U={id:"login"},j={id:"form"},z=t("div",{class:"mb-4",style:{"text-align":"center",color:"black"}},[t("h2",null,"Connexion")],-1),E=t("br",null,null,-1),H={style:{"text-align":"center"}},O=t("span",{class:"d-xs-block",style:{color:"white"}},"Connexion",-1),F={__name:"connexion",setup(R){const k=function(){},l=n(!1);n(!1);const i=n(""),p=n(!0),r=n(""),_=n(null);g(()=>p.value?"fa-eye":"fa-eye-slash"),g(()=>p.value?"password":"text");const V=n("Ce champ est obligatoire"),{data:T,status:$,signIn:C,signOut:A}=c(),I=async({username:f,password:o})=>{var d,e,w;const{error:s,url:v}=await C("credentials",{username:f,password:o,redirect:!1});if(s){const b=N();s=="Votre compte est actuellement désactivé, veuillez vous rapprocher de l'administrateur pour débloquer votre compte."?b.error(s):b.error("Identifiant, adresse email ou mot de passe incorrect.")}else return console.log("useSession().data.value?.user"),console.log((d=c().data.value)==null?void 0:d.user),(w=(e=c().data.value)==null?void 0:e.user)!=null&&w.is_change_password?y("/tableau-de-bord"):y("/change-password")},S=async function(){(await _.value.validate()).valid&&await I({username:i.value,password:r.value})};return(f,o)=>{const s=m("v-text-field"),v=m("v-btn"),d=m("v-form");return B(),q("div",null,[t("div",P,[t("div",U,[t("div",j,[z,u(d,{onSubmit:M(k,["prevent"]),ref_key:"form",ref:_},{default:h(()=>[u(s,{id:"email","prepend-icon":"mdi-email",modelValue:a(i),"onUpdate:modelValue":o[0]||(o[0]=e=>x(i)?i.value=e:null),modelModifiers:{trim:!0},rules:[e=>!!e||a(V)],outlined:"",label:"Identifiant *",required:"",style:{"background-color":"white"}},null,8,["modelValue","rules"]),u(s,{"prepend-icon":"mdi-lock-outline",label:"Mot de passe *",modelValue:a(r),"onUpdate:modelValue":o[1]||(o[1]=e=>x(r)?r.value=e:null),modelModifiers:{trim:!0},outlined:"","append-inner-icon":a(l)?"mdi-eye":"mdi-eye-off",type:a(l)?"text":"password","onClick:appendInner":o[2]||(o[2]=e=>l.value=!a(l)),required:""},null,8,["modelValue","append-inner-icon","type"]),E,t("div",H,[u(v,{class:"white--text",onClick:S,style:{color:"white","background-color":"#093e73",width:"200px","margin-bottom":"10px"},rounded:"",href:""},{default:h(()=>[O]),_:1})])]),_:1},512)])])])])}}};export{F as default};
