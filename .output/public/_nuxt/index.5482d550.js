import{_ as z}from"./table.665c22b5.js";import{q as O,u as G,r as o,p as f,b as g,d as H,e as _,f as m,w as u,h as l,j as h,g as I,i as D,o as K,l as w,t as k,s as J,v as Q}from"./entry.febd1464.js";const W={class:"mt-4"},X={class:"mx-md-4 mx-2 pt-5"},Y={class:"mt-6 mx-md-4 mx-2"},Z=_("span",{class:"d-none d-xs-none d-sm-block"},"Diplôme",-1),ee={style:{"text-align":"center"}},te={style:{"text-align":"center"}},le=_("div",null,null,-1),ie={__name:"index",async setup(ae){let a,i;const{$caxios:p}=Q();O({title:"Liste des candidats"});let U=G(),c=o([]),b=o([]),s=o({}),C=o([]),N=o([]),S=o([]),B=o([]),L=o([]);o([]);let A=o([]),y=o(!1),x=o(!1),V=o(!1),M=o("/api/candidats/");C.value=([a,i]=f(()=>p("/sessions/min")),a=await a,i(),a),N.value=([a,i]=f(()=>p("/systeme/branchs")),a=await a,i(),a),S.value=([a,i]=f(()=>p("/systeme/centres")),a=await a,i(),a),B.value=([a,i]=f(()=>p("/systeme/corps")),a=await a,i(),a),L.value=([a,i]=f(()=>p("/systeme/departments")),a=await a,i(),a),A.value=([a,i]=f(()=>p("/systeme/metiers")),a=await a,i(),a);const R=o([{key:"numero",text:"N°",active_modif_column:!0},{key:"lastname",text:"Nom",active_modif_column:!0},{key:"firstname",text:"Prénoms",active_modif_column:!1},{key:"sex",text:"Sexe",active_modif_column:!1},{key:"date_of_birth",text:"Date de naissance",active_modif_column:!0},{key:"place_of_birth",text:"Lieu de naissance",active_modif_column:!1},{key:"branch",text:"Branche",active_modif_column:!1},{key:"corps",text:"Corps",active_modif_column:!1},{key:"metier",text:"Métier",active_modif_column:!1},{key:"centre",text:"Centre",active_modif_column:!1},{key:"municipality",text:"Commune",active_modif_column:!1},{key:"department",text:"Département",active_modif_column:!1}]),j=o("Veuillez renseigner ce champ.");async function P(){var v;let d;V.value=!0,console.log("GET___");let t=c.value.map(n=>n.id);t.push(0);try{d=await D("/api/candidats/diplome",{params:{ids:t,session_id:s.value.session_id}},"$wztj5CkRPj");let n=window.URL.createObjectURL(new Blob([d.data.value])),r=document.createElement("a");r.href=n,r.setAttribute("download","diplome.pdf"),document.body.appendChild(r),r.click(),console.log(r)}catch(n){console.log(n),U.error((v=d.data.value)==null?void 0:v.error)}V.value=!1}async function T(){var t;let d={};x.value=!0,c.value=[];try{d=await D(M,{body:{...s.value},method:"POST"},"$9w4KM0NL8S"),b.value=d.data.value}catch(v){console.log(v),U.error((t=d.data.value)==null?void 0:t.error)}x.value=!1}return(d,t)=>{const v=g("v-list-item"),n=g("v-autocomplete"),r=g("v-btn"),E=g("v-form"),F=g("v-icon"),$=z;return K(),H("div",W,[_("div",X,[m(E,{modelValue:l(y),"onUpdate:modelValue":t[6]||(t[6]=e=>h(y)?y.value=e:y=e),onSubmit:t[7]||(t[7]=I(e=>T(),["prevent"])),class:"mt-5"},{default:u(()=>[m(n,{modelValue:l(s).session_id,"onUpdate:modelValue":t[0]||(t[0]=e=>l(s).session_id=e),items:l(C),color:"blue-grey-lighten-2","item-title":"name_","item-value":"id",label:"Session *",variant:"outlined",rules:[e=>!!e||l(j)],clearable:""},{selection:u(({item:e})=>[w(k(e.raw.name_),1)]),item:u(({props:e,item:q})=>[m(v,J(e,{title:q.raw.name_}),null,16,["title"])]),_:1},8,["modelValue","items","rules"]),m(n,{modelValue:l(s).branch,"onUpdate:modelValue":t[1]||(t[1]=e=>l(s).branch=e),items:l(N),color:"blue-grey-lighten-2","item-title":"name","item-value":"name",label:"Branche",variant:"outlined",clearable:""},null,8,["modelValue","items"]),m(n,{modelValue:l(s).centre,"onUpdate:modelValue":t[2]||(t[2]=e=>l(s).centre=e),items:l(S),color:"blue-grey-lighten-2","item-title":"name","item-value":"name",label:"Centre",variant:"outlined",clearable:""},null,8,["modelValue","items"]),m(n,{modelValue:l(s).corps,"onUpdate:modelValue":t[3]||(t[3]=e=>l(s).corps=e),items:l(B),color:"blue-grey-lighten-2","item-title":"name","item-value":"name",label:"Corps",variant:"outlined",clearable:""},null,8,["modelValue","items"]),m(n,{modelValue:l(s).metier,"onUpdate:modelValue":t[4]||(t[4]=e=>l(s).metier=e),items:l(A),color:"blue-grey-lighten-2","item-title":"name","item-value":"name",label:"Metier",variant:"outlined",clearable:""},null,8,["modelValue","items"]),m(n,{modelValue:l(s).department,"onUpdate:modelValue":t[5]||(t[5]=e=>l(s).department=e),items:l(L),color:"blue-grey-lighten-2","item-title":"name","item-value":"name",label:"Départment",variant:"outlined"},null,8,["modelValue","items"]),m(r,{disabled:l(y)==!1,color:"#093e73",type:"submit",class:"text-white",loading:l(x)},{default:u(()=>[w(" Afficher ")]),_:1},8,["disabled","loading"])]),_:1},8,["modelValue"])]),_("div",Y,[m(r,{class:"mr-1",style:{color:"white"},color:"#093e73",disabled:l(c).length==0,loading:l(V),onClick:t[8]||(t[8]=e=>P())},{default:u(()=>[m(F,null,{default:u(()=>[w("mdi-email-seal-outline ")]),_:1}),Z]),_:1},8,["disabled","loading"])]),_("div",null,[m($,{with_selected:!0,selected:l(c),"onUpdate:selected":t[9]||(t[9]=e=>h(c)?c.value=e:c=e),items:l(b),"onUpdate:items":t[10]||(t[10]=e=>h(b)?b.value=e:b=e),header:l(R),expanded:!1,no_data:"Aucune donnée disponible!"},{"item(numero)":u(({index:e})=>[_("div",ee,k(e+1),1)]),"item(date_of_birth)":u(({elt_item:e})=>[_("div",te,k(d.$dateformatFr(e.date_of_birth)),1)]),_:1},8,["selected","items","header"])]),le])}}};export{ie as default};
